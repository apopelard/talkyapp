<div class="page-header">
  <h1>Users</h1>
</div>

<p><%= link_to 'Add a New User', new_user_url, class: 'btn btn-primary' %></p>

<table class="table table-hover">
  <thead>
    <tr>
      <th>Follow</th>
      <th>Username</th>
      <th>Name</th>
      <th>Location</th>
      <th>Picture</th>
      <th>Email</th>
      <th>Following</th>
      <th>Followers</th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td>
          <%= follow_button(user) %>
        </td>
        <td><%= user.username %></td>
        <td><%= user.full_name %></td>
        <td><%= user.location %></td>
        <td><%= image_tag user.picture_url, class: 'img-circle', width: '50', alt: '#{user.username}'%></td>
        <td><%= link_to "email #{user.first_name}", "mailto:#{user.email}" %></td>
        <td>
          <% user.followings.each do |following| %>
          <p><%= following.full_name %></p>
          <% end %>
        </td>
        <td>
          <% user.followers.each do |follower| %>
          <p><%= follower.full_name %></p>
          <% end %>
        </td>
        <td><%= link_to '<i class="fa fa-search-plus"></i>'.html_safe, user_url(user), class: 'btn btn-primary' %></td>
        <td><%= link_to '<i class="fa fa-edit"></i>'.html_safe, edit_user_url(user), class: 'btn btn-warning' %></td>
        <td><%= link_to '<i class="fa fa-trash-o"></i>'.html_safe, user_url(user), method: 'delete', data: { confirm: "Do you really want to delete this user?" }, class: 'btn btn-danger' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

